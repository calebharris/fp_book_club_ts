<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Chapter 2. Getting started with functional programming in TypeScript</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/fp_book_club_ts/assets/css/0.styles.f335e7b4.css" as="style"><link rel="preload" href="/fp_book_club_ts/assets/js/app.a4a48216.js" as="script"><link rel="preload" href="/fp_book_club_ts/assets/js/6.141ea5e1.js" as="script"><link rel="prefetch" href="/fp_book_club_ts/assets/js/2.cda51ec0.js"><link rel="prefetch" href="/fp_book_club_ts/assets/js/3.3c7491ba.js"><link rel="prefetch" href="/fp_book_club_ts/assets/js/4.1679b0bc.js"><link rel="prefetch" href="/fp_book_club_ts/assets/js/5.0f8b112b.js"><link rel="prefetch" href="/fp_book_club_ts/assets/js/7.6cf07ea0.js">
    <link rel="stylesheet" href="/fp_book_club_ts/assets/css/0.styles.f335e7b4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/fp_book_club_ts/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/fp_book_club_ts/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Chapters</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fp_book_club_ts/chapter_1.html" class="nav-link">Chapter 1</a></li><li class="dropdown-item"><!----> <a href="/fp_book_club_ts/chapter_2.html" class="nav-link router-link-exact-active router-link-active">Chapter 2</a></li><li class="dropdown-item"><!----> <a href="/fp_book_club_ts/chapter_3.html" class="nav-link">Chapter 3</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/calebharris/fp_book_club_ts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/fp_book_club_ts/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Chapters</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fp_book_club_ts/chapter_1.html" class="nav-link">Chapter 1</a></li><li class="dropdown-item"><!----> <a href="/fp_book_club_ts/chapter_2.html" class="nav-link router-link-exact-active router-link-active">Chapter 2</a></li><li class="dropdown-item"><!----> <a href="/fp_book_club_ts/chapter_3.html" class="nav-link">Chapter 3</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/calebharris/fp_book_club_ts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/fp_book_club_ts/chapter_1.html" class="sidebar-link">Chapter 1. What is functional programming?</a></li><li><a href="/fp_book_club_ts/chapter_2.html" class="active sidebar-link">Chapter 2. Getting started with functional programming in TypeScript</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fp_book_club_ts/chapter_2.html#introducing-typescript-an-example" class="sidebar-link">Introducing TypeScript: an example</a></li><li class="sidebar-sub-header"><a href="/fp_book_club_ts/chapter_2.html#running-our-program" class="sidebar-link">Running our program</a></li><li class="sidebar-sub-header"><a href="/fp_book_club_ts/chapter_2.html#modules-imports-and-exports" class="sidebar-link">Modules, imports, and exports</a></li><li class="sidebar-sub-header"><a href="/fp_book_club_ts/chapter_2.html#higher-order-functions-passing-functions-to-functions" class="sidebar-link">Higher-order functions: passing functions to functions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fp_book_club_ts/chapter_2.html#writing-loops-functionally" class="sidebar-link">Writing loops functionally</a></li><li class="sidebar-sub-header"><a href="/fp_book_club_ts/chapter_2.html#recursion-iteration-and-stack-safety" class="sidebar-link">Recursion, iteration, and stack-safety</a></li><li class="sidebar-sub-header"><a href="/fp_book_club_ts/chapter_2.html#exercise-2-1-fibonacci-numbers" class="sidebar-link">Exercise 2.1. Fibonacci numbers</a></li><li class="sidebar-sub-header"><a href="/fp_book_club_ts/chapter_2.html#our-first-higher-order-function" class="sidebar-link">Our first higher-order function</a></li></ul></li><li class="sidebar-sub-header"><a href="/fp_book_club_ts/chapter_2.html#polymorphic-functions-abstracting-over-types" class="sidebar-link">Polymorphic functions: abstracting over types</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fp_book_club_ts/chapter_2.html#monomorphic-function-to-find-a-string-in-an-array" class="sidebar-link">Monomorphic function to find a string in an array</a></li><li class="sidebar-sub-header"><a href="/fp_book_club_ts/chapter_2.html#polymorphic-function-to-find-an-element-in-an-array" class="sidebar-link">Polymorphic function to find an element in an array</a></li><li class="sidebar-sub-header"><a href="/fp_book_club_ts/chapter_2.html#exercise-2-2-checking-for-order" class="sidebar-link">Exercise 2.2. Checking for order</a></li><li class="sidebar-sub-header"><a href="/fp_book_club_ts/chapter_2.html#calling-hofs-with-anonymous-functions" class="sidebar-link">Calling HOFs with anonymous functions</a></li><li class="sidebar-sub-header"><a href="/fp_book_club_ts/chapter_2.html#functions-as-values-in-typescript" class="sidebar-link">Functions as values in TypeScript</a></li></ul></li><li class="sidebar-sub-header"><a href="/fp_book_club_ts/chapter_2.html#following-types-to-implementations" class="sidebar-link">Following types to implementations</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fp_book_club_ts/chapter_2.html#exercise-2-3-currying" class="sidebar-link">Exercise 2.3. Currying</a></li><li class="sidebar-sub-header"><a href="/fp_book_club_ts/chapter_2.html#exercise-2-4-uncurrying" class="sidebar-link">Exercise 2.4. Uncurrying</a></li><li class="sidebar-sub-header"><a href="/fp_book_club_ts/chapter_2.html#exercise-2-5-function-composition" class="sidebar-link">Exercise 2.5. Function composition</a></li></ul></li><li class="sidebar-sub-header"><a href="/fp_book_club_ts/chapter_2.html#summary" class="sidebar-link">Summary</a></li></ul></li><li><a href="/fp_book_club_ts/chapter_3.html" class="sidebar-link">Chapter 3. Functional data structures</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="chapter-2-getting-started-with-functional-programming-in-typescript"><a href="#chapter-2-getting-started-with-functional-programming-in-typescript" aria-hidden="true" class="header-anchor">#</a> Chapter 2. Getting started with functional programming in TypeScript</h1> <p>Our ultimate goal is to start thinking about programs more as combinations of pure functions and less as sequences of
instructions that each have an effect. In this chapter, we'll learn some of TypeScript's syntax, and how to use
its features to exercise the basics of typed functional programming techniques: writing loops as recursive functions,
using higher-order functions (HOFs), and writing polymorphic HOFs.</p> <h2 id="introducing-typescript-an-example"><a href="#introducing-typescript-an-example" aria-hidden="true" class="header-anchor">#</a> Introducing TypeScript: an example</h2> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">/**
 * abs.ts - a simple TypeScript program
 **/</span>

<span class="token comment">// A comment!</span>
<span class="token comment">/* A multiline (or block)
     comment */</span>
<span class="token comment">/**
 * A documentation comment
 **/</span>

<span class="token comment">// Exporting something makes it visible to</span>
<span class="token comment">// code outside of this module</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">abs</span><span class="token punctuation">(</span>n<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>        <span class="token comment">// abs takes a number and</span>
                                                <span class="token comment">// returns a number</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token operator">-</span>n<span class="token punctuation">;</span>                                  <span class="token comment">// return the negation of n</span>
  <span class="token keyword">else</span>                                          <span class="token comment">// if it's less than zero</span>
    <span class="token keyword">return</span> n<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Since this function isn't exported, it's</span>
<span class="token comment">// only visible to code in this file</span>
<span class="token keyword">function</span> <span class="token function">formatAbs</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token template-string"><span class="token string">`The absolute value of </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>x<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">abs</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> msg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// This line will be executed when the module</span>
<span class="token comment">// is loaded, or when this file is executed</span>
<span class="token comment">// directly</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">formatAbs</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">// writes to standard out</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>The building blocks of TypeScript programs are modules. For now, it's fine to think of each TypeScript file as though
it automatically defines a module. The <code>export</code> keyword does not come into play in this example, but makes the <code>abs</code>
function visible to other modules. In other words, <code>abs</code> is a public member of this module. Functions, classes,
interfaces, types, and raw values can all be members of a module. We'll discuss all these constructs later.</p> <p>Our module has three functions, which we'll also call methods, declared with the <code>function</code> keyword. There are other
ways to declare functions, but we'll cover those later.</p> <p>The <code>abs</code> function is a pure function that takes a number and returns its absolute value:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">abs</span><span class="token punctuation">(</span>n<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token operator">-</span>n<span class="token punctuation">;</span>
  <span class="token keyword">else</span>
    <span class="token keyword">return</span> n<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>TypeScript inherits its numeric type from JavaScript. That means it has only one type of number, conveniently called
<code>number</code>, which represents a floating-point value. Without some extra work, or the help of a library, we cannot
distinguish between integers and floating-point values using the type system.</p> <p>The <code>function</code> keyword is followed by a name, and then by a parenthesized list of parameters. <code>Abs</code> takes one argument
named <code>n</code>, of type <code>number</code>, which we denote with <code>: number</code>. Similarly, we declare the type of <code>abs'</code> return value
to be a number with the <code>: number</code> after the parameter list. The body of the function, which contains all its logic, is
written between curly braces: '{' and '}'. We'll sometimes refer to everything before the opening brace as a function
s <em>signature</em>, and everything inside the braces as its <em>definition</em>. In general, code between braces can also be
referred to as a <em>block</em>. The <code>return</code> keyword immediately returns the value after it to the caller.</p> <p>In some languages, the if-else construct works a little like a function call, returning either one value or the other,
depending on the condition. If that were the case in TypeScript, we could write:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">return</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">-</span>n <span class="token keyword">else</span> n<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>But in TypeScript, if-else is only a control-flow mechanism and does not itself return a value. Therefore, when using
if-else, we must rely on side effects to know which branch was followed. We'll be careful to keep these side effects as
localized as possible, so that the overall function remains pure.</p> <p>The <code>formatAbs</code> function, also pure, takes a number and returns a string:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">formatAbs</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token template-string"><span class="token string">`The absolute value of </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>x<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">abs</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> msg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Notice that we have not declared its return type with a <code>: string</code> clause. TypeScript has powerful <em>type-inferencing</em>
capabilities, meaning that we can often omit explicit type declarations and let the compiler figure things out. But
it's generally considered good style to include explicit types in the signatures of functions we intend for others to
use. Since <code>formatAbs</code> is not <code>export</code>ed, it is effectively private to our module, so it's OK to leave out the
<code>: string</code>.</p> <p><code>FormatAbs</code> uses a template literal to create the message string. Template literals are enclosed in backticks (<code>``</code>)
and can incorporate values from the current scope using the placeholder syntax <code>${value}</code>. In our example, <code>${x}</code> is
replaced by the string representation of <code>x</code>, and <code>${abs(x)}</code> is replaced by the string representation of the value
returned by <code>abs(x)</code>.</p> <p>The first line of <code>formatAbs</code> assigns the result of evaluating the template literal to the variable <code>msg</code>, using the
keyword <code>const</code>. <code>Const</code> is short for <em>constant</em>, which is programmer-speak for &quot;a variable whose value never change&quot;.
Variables declared with <code>const</code> must have a value assigned as soon as they are created, and can never be assigned a new
value.</p> <p>Finally, the last line of the module calls our other functions and writes the result to the console:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">formatAbs</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>If we execute this file directly with a TypeScript interpreter (more on that later), that's when the output would
occur. In that case, it works kind of like an implicit <code>main</code> method. But if we use the file as a module by importing
<code>abs</code> into another file, the output would happen the first time that file actually refers to <code>abs</code>.</p> <h2 id="running-our-program"><a href="#running-our-program" aria-hidden="true" class="header-anchor">#</a> Running our program</h2> <p>The easist way to run this and other programs in these notes is to clone the <a href="https://github.com/calebharris/fp_book_club_ts" title="Functional Programming in TypeScript on GitHub" target="_blank" rel="noopener noreferrer">Git repository<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and
follow the instructions in the README. You'll use npm, a standard package-management tool in the Node.js ecosystem, to
download this project's dependencies, build it, and run it.</p> <p>Once you've completed those steps, you can run the program we've been discussing using the console script:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ npm run console -- fpbookclub/getting_started/abs.ts

&gt; fp_book_club_ts@0.0.1 console /Users/caleb/fp_book_club_ts
&gt; ts-node &quot;fpbookclub/getting_started/abs.ts&quot;

The absolute value of -42 is 42
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>The <code>--</code> argument signals the end of arguments to the <code>npm run</code> command and the start of arguments to the <code>console</code>
script. <code>Console</code> uses a package called <code>ts-node</code> under the hood, which acts like a TypeScript REPL when no script
argument is provided:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ npm run console

&gt; fp_book_club_ts@0.0.1 console /Users/caleb/src/fp_book_club_ts
&gt; ts-node

&gt; import { abs } from &quot;./fpbookclub/getting_started/abs&quot;;
{}
&gt; abs(-13);
The absolute value of -42 is 42
13
&gt; abs(6);
6
&gt; (Ctrl-D to exit)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>In the previous example, we are treating the sample program as a module and importing the <code>abs</code> function into the
REPL's scope. You can see where our &quot;main&quot; code is executed, which is right when we use <code>abs</code> for the first time. On
the second invocation, because the module has already been loaded, we don't see a second line of output. Mixing
script-like and module-like code like this, as you can see, can lead to confusing results, so generally we'll stick to
one or the other in a given file.</p> <p>Finally, the project for these notes incorporates <a href="https://jestjs.io/en/" title="Jest" target="_blank" rel="noopener noreferrer">Jest<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - a JavaScript testing framework. You can use the
<code>npm test</code> command to run all the tests for the project:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ npm test

&gt; fp_book_club_ts@0.0.1 test /Users/caleb/src/fp_book_club_ts
&gt; jest

 PASS  fpbookclub/getting_started/abs.test.ts
  ● Console

    console.log fpbookclub/getting_started/abs.ts:32
      The absolute value of -42 is 42

 PASS  fpbookclub/intro/cafe.test.ts
  ● Console

    console.log fpbookclub/intro/impure_example.ts:13
      Side effect! Charging the credit card...
    console.log fpbookclub/intro/cafe.test.ts:35
      Another side effect


Test Suites: 2 passed, 2 total
Tests:       5 passed, 5 total
Snapshots:   0 total
Time:        1.083s, estimated 2s
Ran all test suites.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>You can also have Jest &quot;watch&quot; the source files and re-run related tests whenever a source file changes. Doing so
brings up a little interactive test results menu, which provides options for running tests manually or exiting from the
watch session.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ npm run test:watch

 PASS  fpbookclub/getting_started/abs.test.ts
  ✓ abs computes the absolute value of a number (4ms)

  console.log fpbookclub/getting_started/abs.ts:32
    The absolute value of -42 is 42

Test Suites: 1 passed, 1 total
Tests:       1 passed, 1 total
Snapshots:   0 total
Time:        0.673s, estimated 1s
Ran all test suites related to changed files.

Watch Usage
 › Press a to run all tests.
 › Press f to run only failed tests.
 › Press p to filter by a filename regex pattern.
 › Press t to filter by a test name regex pattern.
 › Press q to quit watch mode.
 › Press Enter to trigger a test run.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="modules-imports-and-exports"><a href="#modules-imports-and-exports" aria-hidden="true" class="header-anchor">#</a> Modules, imports, and exports</h2> <p>We've already seen that files are essentially modules in TypeScript. More specifically, any file that has an <code>import</code>
or <code>export</code> statement is a module. A module can have <em>named</em> exports, which we've already seen an example of. Each
module can also declare one <em>default</em> export. Named and default exports are imported in slightly different ways.
Suppose we have the following module that we want to reuse elsewhere:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">/**
 * lib.ts
 **/</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">commonlyUsed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">lessCommonlyUsed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">evenLessCommonlyUsed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Then our client module has a number of options for importing <code>lib</code>'s functionality:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// directly import named exports</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> lessCommonlyUsed<span class="token punctuation">,</span> evenLessCommonlyUsed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./lib&quot;</span><span class="token punctuation">;</span>

<span class="token function">lessCommonlyUsed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">evenLessCommonlyUsed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// directly import named exports and rename them</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> lessCommonlyUsed <span class="token keyword">as</span> a<span class="token punctuation">,</span> evenLessCommonlyUsed <span class="token keyword">as</span> b <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./lib&quot;</span><span class="token punctuation">;</span>

<span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// import all named exports into a namespace</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> lib <span class="token keyword">from</span> <span class="token string">&quot;./lib&quot;</span><span class="token punctuation">;</span>

lib<span class="token punctuation">.</span><span class="token function">lessCommonlyUsed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
lib<span class="token punctuation">.</span><span class="token function">evenLessCommonlyUsed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// default exports are easier to import</span>
<span class="token keyword">import</span> myName <span class="token keyword">from</span> <span class="token string">&quot;./lib&quot;</span><span class="token punctuation">;</span>

<span class="token function">myName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// `myName` is actually `commonlyUsed`</span>

<span class="token comment">// default exports are just special named exports</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token keyword">default</span> <span class="token keyword">as</span> myOtherName <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./lib&quot;</span><span class="token punctuation">;</span>

<span class="token function">myOtherName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// `myName` and 'myOtherName` are `commonlyUsed`</span>
lib<span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// so is `lib.default`</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h2 id="higher-order-functions-passing-functions-to-functions"><a href="#higher-order-functions-passing-functions-to-functions" aria-hidden="true" class="header-anchor">#</a> Higher-order functions: passing functions to functions</h2> <p>It's often useful in functional programming to write functions that accept other functions as arguments or that return
functions as results. These are called higher-order functions (HOFs). Fortunately, in TypeScript, functions are just
like any other value. They can be passed around as arguments, assigned to variables, and stored in data structures. To
get us started, let's think about modifying the program to output both the absolute value of a number <em>and</em> the
factorial of another number. The program's output might look like this:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>The absolute value of -42 is 42
The factorial of 7 is 5040
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>But first...</p> <h3 id="writing-loops-functionally"><a href="#writing-loops-functionally" aria-hidden="true" class="header-anchor">#</a> Writing loops functionally</h3> <p>A possible <code>factorial</code> implementation:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">factorial</span><span class="token punctuation">(</span>n<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">go</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>n<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> acc<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> acc<span class="token punctuation">;</span>
    <span class="token keyword">else</span>
      <span class="token keyword">return</span> <span class="token function">go</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> n <span class="token operator">*</span> acc<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token function">go</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">Note</p> <p>You can find expanded code for this and the following examples in the code repo at
<code>/fpbookclub/getting_started/math.ts</code>.</p></div> <p>We write loops functionally, without mutating a loop variable, with <em>recursive</em> functions. The variable <code>go</code> holds a
recursive function, which is just a function that calls itself. It might seem strange, at first glance, to have a
function defined entirely inside another function. But TypeScript allows us to create functions in any scope.</p> <p>In an imperative language, we'd typically write a <code>for</code> or <code>while</code> loop (known as <em>iteration</em>) that repeatedly runs a
block of code as long as some condition holds. However, this necessarily involves mutating some state (otherwise, the
condition would never change!), which is something we try to minimize in FP. By using a pure, recursive function, we
transmute the local state changes into a chain of calls to the function with different parameters.</p> <p>In the <code>go</code> local function, the recursive call to itself is in <em>tail position</em>, meaning that the return value of the
recursive call is itself immediately returned, rather than being retained and used later in the function. It is
possible, when compiling tail calls, to skip the step of generating a new stack frame and instead reuse the current
stack frame. This process is known as <em>tail call elimination</em>.</p> <p>For a function like <code>go</code> that contains recursive calls only in tail position - a property we describe as <em>tail
recursive</em> - this results in a constant stack size. We say <em>stack safe</em> to describe programs with a constant stack
size. Being aware of how the stack size of a program changes over time is important because most JavaScript runtimes
limit the amount of memory that can be consumed by the stack. With tail call elimination, tail-recursive functions
combine the elegance of pure functions with the efficiency of imperative loops.</p> <h3 id="recursion-iteration-and-stack-safety"><a href="#recursion-iteration-and-stack-safety" aria-hidden="true" class="header-anchor">#</a> Recursion, iteration, and stack-safety</h3> <p>Now for some bad news: TypeScript does not do tail call elimination. That means that if we need to guarantee
stack-safety, we need to use a loop. Deciding when to use recursion vs. when to use iteration is a matter of judgment.
You'll need to decide when stack safety is more important than functional purity based on the needs of your specific
program.  If that seems like a daunting task right now, that's OK. As you follow these notes, work through the
exercises, and become more familiar with functional thinking, you will develop an intuition for making these decisions.</p> <p>The good news is that converting a tail-recursive function to an imperative loop is very straightforward, so it often
makes sense to start with recursion and switch to iteration when your needs dictate it. The solutions to many problems
in FP are naturally expressed with recursive functions, so you'll find yourself doing this fairly frequently. Here is
<code>factorial</code>, refactored to use a <code>while</code> loop:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">factorial</span><span class="token punctuation">(</span>n<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> acc <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> i <span class="token operator">=</span> n<span class="token punctuation">;</span>   <span class="token comment">// declare and initialize mutable variables:w</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token comment">// execute block until i &lt;= 0</span>
    acc <span class="token operator">=</span> acc <span class="token operator">*</span> i<span class="token punctuation">;</span>
    i <span class="token operator">=</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> acc<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>There are just a couple new pieces of syntax here. Using <code>let</code>, rather than <code>const</code>, declares a variable that we can
assign new values to later in our program. While it is possible to declare a variable with <code>let</code> without immediately
assigning a value to it, or <em>initializing</em> it, it's considered good practice not to have uninitialized variables. The
<code>while</code> syntax is pretty self-explanatory: it repeatedly executes the code in the block as long as the condition inside
the parentheses, or the <em>test</em>, evaluates to <code>true</code>. We might refer to <code>i</code> as the <em>loop variable</em>, since the loop
condition depends on it.</p> <p>Most TypeScript programmers would find this code a little odd. They'd probably write something like this, instead:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">factorial</span><span class="token punctuation">(</span>n<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> acc <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> n<span class="token punctuation">;</span> i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token operator">--</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// set `i` to `n` and loop until `i` &lt;= 0</span>
    acc <span class="token operator">*=</span> i<span class="token punctuation">;</span>                    <span class="token comment">// shortcut for `acc = acc * i`</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> acc<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>A <code>for</code> loop is kind of like an advanced <code>while</code> loop. In addition to the the test, it makes explicit what the loop
variable is (<code>i</code>), what its initial value is (<code>let i = n</code>), and how it changes on each iteration (<code>--i</code>, which is a
shortcut for <code>i = i - 1</code>). There's nothing wrong with using a <code>while</code> loop, and sometimes there is no other choice. But
when either will do, use a <code>for</code> loop.</p> <p>Now you know more than you probably wanted to about recursion. Whenever [Functional Programming in Scala] uses
tail-recursion to loop over a structure, we'll use iteration instead, because that's what you'll see in real-world
TypeScript programs. We'll still have plenty of opportunities to use recursion to solve problems.</p> <h3 id="exercise-2-1-fibonacci-numbers"><a href="#exercise-2-1-fibonacci-numbers" aria-hidden="true" class="header-anchor">#</a> Exercise 2.1. Fibonacci numbers</h3> <p>Write a recursive function to get the <em>n</em>th <a href="https://en.wikipedia.org/wiki/Fibonacci_number" title="Fibonacci number - Wikipedia" target="_blank" rel="noopener noreferrer">Fibonacci number<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. The first two Fibonacci numbers are 0 and 1.
The nth number is always the sum of the previous two—the sequence begins 0, 1, 1, 2, 3, 5. Your definition should use a
local tail-recursive function.</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">fib</span><span class="token punctuation">(</span>n<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">number</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Once you have a working recursive implementation, make it stack-safe by converting it to an iterative solution (i.e.
use a loop).</p> <h3 id="our-first-higher-order-function"><a href="#our-first-higher-order-function" aria-hidden="true" class="header-anchor">#</a> Our first higher-order function</h3> <p>Now that we have <code>factorial</code>, let's add it to our program.</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// &lt;definitions of `abs` and `factorial` go here&gt;</span>

<span class="token keyword">function</span> <span class="token function">formatAbs</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token string">&quot;The absolute value of &quot;</span> <span class="token operator">+</span> x <span class="token operator">+</span> <span class="token string">&quot; is &quot;</span> <span class="token operator">+</span> <span class="token function">abs</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> msg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">formatFactorial</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token string">&quot;The factorial of &quot;</span> <span class="token operator">+</span> x <span class="token operator">+</span> <span class="token string">&quot; is &quot;</span> <span class="token operator">+</span> <span class="token function">factorial</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> msg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>The functions <code>formatAbs</code> and <code>formatFactorial</code> are very similar. They differ only in the string describing the result
and which function to call to obtain the result. We can factor these differences out into parameters and write one
function, <code>formatResult</code>, that's more general:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">formatResult</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> f<span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token operator">=&gt;</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`The </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> of </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>x<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>FormatResult</code> is a higher-order function because it takes another function as the <code>f</code> parameter. The type of <code>f</code> is
<code>number =&gt; number</code>, which can be said as &quot;number to number&quot;, &quot;number arrow number&quot;, or &quot;a function that takes a number
parameter and returns a number result&quot; if you're feeling wordy.</p> <p>Both <code>abs</code> and <code>factorial</code> happen to match the type <code>number =&gt; number</code>. We can, therefore, pass either as the value of
the <code>f</code> argument to <code>formatResult</code>:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&gt; formatResult(&quot;absolute value&quot;, -42, abs);
'The absolute value of -42 is 42'
&gt; formatResult(&quot;factorial&quot;, 7, factorial);
'The factorial of 7 is 5040'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">Variable-naming conventions</p> <p>It's a common convention to use names like <code>f</code>, <code>g</code>, and <code>h</code> for higher-order function parameters. In FP, we tend to use
very short variable names, even one-letter names. HOFs are often so general that they have no expectation of what their
function arguments should actually <em>do</em>, beyond conforming to the expected type. Many functional programmers think short
names make code easier to read, because the structure of short code is more apparent at a glance. In these notes, we'll
follow this convention. In your own code, you should do whatever you feel works best for making it readable and
maintainable.</p></div> <h2 id="polymorphic-functions-abstracting-over-types"><a href="#polymorphic-functions-abstracting-over-types" aria-hidden="true" class="header-anchor">#</a> Polymorphic functions: abstracting over types</h2> <p>We've been writing functions that are <em>monomorphic</em>, meaning that they only work for the specific types declared in
their signatures. Especially when writing HOFs, we'd like to write code that works for <em>all</em> types, or <em>polymorphic</em>
code. The kind of polymorphism we're talking about here is <em><a href="https://en.wikipedia.org/wiki/Parametric_polymorphism" title="Parametric polymorphism - Wikipedia" target="_blank" rel="noopener noreferrer">parametric polymorphism<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></em>, rather than the
<em><a href="https://en.wikipedia.org/wiki/Subtyping" title="Subtyping - Wikipedia" target="_blank" rel="noopener noreferrer">subtype polymorphism<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></em> used commonly in object-oriented programming. You may have heard the term
<em>generics</em>, which is another name for parametric polymorphism.</p> <p>To introduce polymorphism, let's consider the example of finding the first instance of a value in an array.</p> <h3 id="monomorphic-function-to-find-a-string-in-an-array"><a href="#monomorphic-function-to-find-a-string-in-an-array" aria-hidden="true" class="header-anchor">#</a> Monomorphic function to find a <code>string</code> in an array</h3> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">findFirst</span><span class="token punctuation">(</span>ss<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> key<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>                               <span class="token comment">// if the key isn't found</span>
                                                <span class="token comment">// we'll return -1</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> ss<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>ss<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      index <span class="token operator">=</span> i<span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>                                    <span class="token comment">// break the loop early if</span>
                                                <span class="token comment">// the key is found</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> index<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>The details of this code aren't too important. But what <em>is</em> important is to notice that, even though we've specified
<code>string[]</code> as the parameter types, this code isn't doing anything specific to strings. If wanted to change the types to
<code>number[]</code>, or any other type of array, the code would look largely the same. Rather than fixing the types to something
specific, we can introduce a <em>type parameter</em> <code>A</code> to define a function that works for any given type <code>A</code>.</p> <h3 id="polymorphic-function-to-find-an-element-in-an-array"><a href="#polymorphic-function-to-find-an-element-in-an-array" aria-hidden="true" class="header-anchor">#</a> Polymorphic function to find an element in an array</h3> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// `A` is a type parameter</span>
<span class="token keyword">function</span> findFirst<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">as</span><span class="token punctuation">:</span> <span class="token constant">A</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> p<span class="token punctuation">:</span> <span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token constant">A</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">as</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">p</span><span class="token punctuation">(</span><span class="token keyword">as</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      index <span class="token operator">=</span> i<span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> index<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>Only the function's signature and the test in the for loop had to change. We introduced a type parameter named <code>A</code> with
the <code>&lt;A&gt;</code> syntax after the function name. We could have named this type parameter anything, but by convention we
normally use one letter uppercase names like <code>A</code> or <code>B</code>. Also, we changed the second parameter to be a function of type
<code>A =&gt; boolean</code>, because we don't know how to compare two values of any arbitrary type <code>A</code>. The name <code>p</code> stands for
<em>predicate</em>, which is a name for a function that returns a boolean. Our <code>findFirst</code> now returns the first value in the
array for which <code>p</code> returns <code>true</code>. And it works for any type, not just <code>string</code>s!</p> <h3 id="exercise-2-2-checking-for-order"><a href="#exercise-2-2-checking-for-order" aria-hidden="true" class="header-anchor">#</a> Exercise 2.2. Checking for order</h3> <p>Implement <code>isSorted</code>, which checks whether an array of <code>A</code> values is sorted according to a given comparison function.</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> isSorted<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">as</span><span class="token punctuation">:</span> <span class="token constant">A</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> ordered<span class="token punctuation">:</span> <span class="token punctuation">(</span>l<span class="token punctuation">:</span> <span class="token constant">A</span><span class="token punctuation">,</span> r<span class="token punctuation">:</span> <span class="token constant">A</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">boolean</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="calling-hofs-with-anonymous-functions"><a href="#calling-hofs-with-anonymous-functions" aria-hidden="true" class="header-anchor">#</a> Calling HOFs with anonymous functions</h3> <p>We often want to call HOFs with functions defined in-place, rather than having to define a named function separately and
then pass it to the HOF. This is because the functions we provide to HOFs are often crafted for a specific purpose and
are not generally reusable elsewhere in our code.</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// instead of this...</span>
<span class="token keyword">function</span> <span class="token function">equalsOne</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> equalsOne<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// we want this</span>
<span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> x <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>The second way of calling <code>findFirst</code> in the example above uses an <em>anonymous function</em>, also called a <em>function
expression</em>. It allows us to avoid &quot;polluting&quot; our module's namespace with lots of function declarations that may only
be used in one place. But, we've sacrificed a little readability in the call to findFirst. Wouldn't it be nice if there
was a shorter way to define an anonymous function? Turns out there is!</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// actually, we *really* want this</span>
<span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x <span class="token operator">=&gt;</span> x <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>In this example, <code>x =&gt; x === 1</code> is an <em><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions" title="Arrow functions - MDN" target="_blank" rel="noopener noreferrer">arrow function<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></em>, which has a few differences from a function created
with <code>function</code> that we won't go into right now. This is actually the shortest possible form of an arrow function.
Because it's only one line, we can omit the curly braces and <code>return</code> keyword. We're also relying on TypeScripts type
inferencing to avoid annotating <code>x</code> with a type. The long form looks like this:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Just like normal functions, we can assign arrow functions to variables. Here's an example with some extraneous type
annotations, just to demonstrate the syntax:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> equalsOne<span class="token punctuation">:</span> <span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function-variable function">number</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="functions-as-values-in-typescript"><a href="#functions-as-values-in-typescript" aria-hidden="true" class="header-anchor">#</a> Functions as values in TypeScript</h3> <p>When we define a function expression, through either the <code>function</code> or arrow syntax, we're actually creating a
<code>Function</code> object, that defines a <code>call</code> method (among others). Calling a function directly is equivalent to invoking
<code>call</code> on the function object:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&gt; const equalsOne = (x: number) =&gt; x === 1;
'use strict'
&gt; equalsOne
[Function: equalsOne]
&gt; equalsOne(1);
true
&gt; equalsOne.call({}, 1);
true
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>The <code>call</code> method's first argument is the <em>context</em>, also known as the <code>this</code> value, for the call. The context is only
meaningful inside <code>function</code>-defined functions, where it is accessible via the <code>this</code> keyword. It's useful primarily in
object-oriented programming, which we will use occasionally in these notes. In the above REPL session, we used an arrow
function, which has no context and therefore ignores the first argument to <code>call</code> (hence our passing of an empty object,
<code>{}</code>).</p> <p>If you think way back to our first example, you may recall that we defined a <code>Charge</code> class with a <code>combine</code> function
that used <code>this</code>:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Charge</span> <span class="token punctuation">{</span>
  <span class="token comment">// several properties and the constructor omitted...</span>

  <span class="token function">combine</span><span class="token punctuation">(</span>other<span class="token punctuation">:</span> Charge<span class="token punctuation">)</span><span class="token punctuation">:</span> Charge <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cc <span class="token operator">==</span> other<span class="token punctuation">.</span>cc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Charge</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cc<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>amount <span class="token operator">+</span> other<span class="token punctuation">.</span>amount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Can't combine charges to different cards&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>We called <code>combine</code> a <em>method</em> of <code>Charge</code>. A method is just a function defined for a class. When we use the <em>method
syntax</em> for calling a function, <code>this</code> is automatically set to the class instance:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&gt; const charge = new Charge(new CreditCard(), 1.99);
undefined
&gt; charge
Charge { cc: CreditCard {}, amount: 1.99 }
&gt; charge.combine(charge);
Charge { cc: CreditCard {}, amount: 3.98 }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>In the above example, <code>charge.combine(charge)</code> is using the method syntax. We <em>could</em> use <code>call</code> to change the context:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&gt; charge.combine.call({}, charge);
/Users/caleb/src/fp_book_club_ts/fpbookclub/intro/pure_example.ts:32
            throw new Error(&quot;Can't combine charges to different cards&quot;);
            ...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>As you can see, changing <code>this</code> around on code that doesn't expect it usually leads to bad results. You can also see
that TypeScript makes no guarantees about what <code>this</code> points to, so use it wisely!</p> <h2 id="following-types-to-implementations"><a href="#following-types-to-implementations" aria-hidden="true" class="header-anchor">#</a> Following types to implementations</h2> <p>Polymorphic functions are limited in what they can do. A bare type parameter <code>A</code> tells us nothing about what operations
a value of <code>A</code> supports, so the only operations we can perform are those passed explicitly to us. In some cases, we find
that a polymorphic function is so constrained that only one implementation is possible.</p> <p>As an example, let's consider the <code>partial1</code> function. It takes a value and a function of two arguments, and returns a
function of one argument. The name means that it applies some, but not all, of a function's arguments.</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> partial1<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token punctuation">,</span> <span class="token constant">C</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token constant">A</span><span class="token punctuation">,</span> f<span class="token punctuation">:</span> <span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token constant">A</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token constant">B</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">C</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>b<span class="token punctuation">:</span> <span class="token constant">B</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">C</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>There is really only one way to implement this function. To start, we know we need to return another function that takes
a single parameter of type <code>B</code>, so lets start with that:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> partial1<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token punctuation">,</span> <span class="token constant">C</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token constant">A</span><span class="token punctuation">,</span> f<span class="token punctuation">:</span> <span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token constant">A</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token constant">B</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">C</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>b<span class="token punctuation">:</span> <span class="token constant">B</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">C</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">?</span><span class="token operator">?</span><span class="token operator">?</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Our returned function needs to itself return a value of type <code>C</code>. Examining the values available to us, we see that the
only way to obtain a <code>C</code> is to call <code>f</code> with an <code>A</code>, which is provided as a parameter to <code>partial1</code>, and a <code>B</code>, which
our returned function takes as a parameter.</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> partial1<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token punctuation">,</span> <span class="token constant">C</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token constant">A</span><span class="token punctuation">,</span> f<span class="token punctuation">:</span> <span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token constant">A</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token constant">B</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">C</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>b<span class="token punctuation">:</span> <span class="token constant">B</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">C</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">f</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>And we're done! We now have a higher-order function that takes a function of two arguments and partially applies it.</p> <h3 id="exercise-2-3-currying"><a href="#exercise-2-3-currying" aria-hidden="true" class="header-anchor">#</a> Exercise 2.3. Currying</h3> <p>Implement <code>curry</code>, which converts a function <code>f</code> of two arguments into a function of one argument that partially applies
<code>f</code>. This is another case where there is only one implementation that compiles.</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> curry<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token punctuation">,</span> <span class="token constant">C</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>f<span class="token punctuation">:</span> <span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token constant">A</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token constant">B</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">C</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token constant">A</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>b<span class="token punctuation">:</span> <span class="token constant">B</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">C</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="exercise-2-4-uncurrying"><a href="#exercise-2-4-uncurrying" aria-hidden="true" class="header-anchor">#</a> Exercise 2.4. Uncurrying</h3> <p>Implement <code>uncurry</code>, which reverses the transformation of <code>curry</code>. Since <code>=&gt;</code> in type signatures associates to the
right, <code>(a: A) =&gt; ((b: B) =&gt; C)</code> can be written as <code>(a: A) =&gt; (b: B) =&gt; C</code>.</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> uncurry<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token punctuation">,</span> <span class="token constant">C</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>f<span class="token punctuation">:</span> <span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token constant">A</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>b<span class="token punctuation">:</span> <span class="token constant">B</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">C</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token constant">A</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token constant">B</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">C</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="exercise-2-5-function-composition"><a href="#exercise-2-5-function-composition" aria-hidden="true" class="header-anchor">#</a> Exercise 2.5. Function composition</h3> <p>Implement <code>compose</code>, which feeds the output of one function into the input of another.</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> compose<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token punctuation">,</span> <span class="token constant">C</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>f<span class="token punctuation">:</span> <span class="token punctuation">(</span>b<span class="token punctuation">:</span> <span class="token constant">B</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">C</span><span class="token punctuation">,</span> g<span class="token punctuation">:</span> <span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token constant">A</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">B</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token constant">A</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">C</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>This is a very common thing to want to do in functional programming. In fact, all three previous exercises will yield
functions that we'll want to re-use in later exercises, so you might want to put them in a <code>util</code> module.</p> <p>So we've written a bunch of interesting one-liners, who cares? How does this help when writing software in the large?
Turns out that polymorphic, higher-order functions can be reused in a large variety of contexts, because they say
nothing about a particular domain. Instead, they abstract over common patterns that widely applicable. Writing
applications in FP ends up feeling very similar to writing small utilities.</p> <h2 id="summary"><a href="#summary" aria-hidden="true" class="header-anchor">#</a> Summary</h2> <p>We learned...</p> <ul><li>Some TypeScript</li> <li>How to define simple functions and programs</li> <li>How to loop functionally and how to choose iteration or recursion</li> <li>What higher-order functions are</li> <li>What polymorphic functions are</li></ul> <p>Next up... functional data structures, starting with lists.</p></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/fp_book_club_ts/chapter_1.html" class="prev">
          Chapter 1. What is functional programming?
        </a></span> <span class="next"><a href="/fp_book_club_ts/chapter_3.html">
          Chapter 3. Functional data structures
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/fp_book_club_ts/assets/js/6.141ea5e1.js" defer></script><script src="/fp_book_club_ts/assets/js/app.a4a48216.js" defer></script>
  </body>
</html>
