<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Chapter 1. What is functional programming? | Functional Programming in TypeScript</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/fp_book_club_ts/assets/css/styles.ea25a7e9.css" as="style"><link rel="preload" href="/fp_book_club_ts/assets/js/app.ea25a7e9.js" as="script"><link rel="preload" href="/fp_book_club_ts/assets/js/4.87d19787.js" as="script"><link rel="prefetch" href="/fp_book_club_ts/assets/js/2.a40b0877.js"><link rel="prefetch" href="/fp_book_club_ts/assets/css/1.styles.5a8ea794.css"><link rel="prefetch" href="/fp_book_club_ts/assets/js/1.5a8ea794.js"><link rel="prefetch" href="/fp_book_club_ts/assets/css/2.styles.a40b0877.css"><link rel="prefetch" href="/fp_book_club_ts/assets/js/3.20eac3d5.js"><link rel="prefetch" href="/fp_book_club_ts/assets/js/5.e6485499.js"><link rel="prefetch" href="/fp_book_club_ts/assets/js/6.d9dc8357.js"><link rel="prefetch" href="/fp_book_club_ts/assets/js/7.8c6e4af2.js">
    <link rel="stylesheet" href="/fp_book_club_ts/assets/css/1.styles.5a8ea794.css"><link rel="stylesheet" href="/fp_book_club_ts/assets/css/2.styles.a40b0877.css"><link rel="stylesheet" href="/fp_book_club_ts/assets/css/styles.ea25a7e9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/fp_book_club_ts/" class="home-link router-link-active"><!----> <span class="site-name">Functional Programming in TypeScript</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/fp_book_club_ts/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Chapters</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fp_book_club_ts/chapter_1.html" class="nav-link router-link-exact-active router-link-active">Chapter 1</a></li><li class="dropdown-item"><!----> <a href="/fp_book_club_ts/chapter_2.html" class="nav-link">Chapter 2</a></li><li class="dropdown-item"><!----> <a href="/fp_book_club_ts/chapter_3.html" class="nav-link">Chapter 3</a></li><li class="dropdown-item"><!----> <a href="/fp_book_club_ts/chapter_4.html" class="nav-link">Chapter 4</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/calebharris/fp_book_club_ts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/fp_book_club_ts/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Chapters</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fp_book_club_ts/chapter_1.html" class="nav-link router-link-exact-active router-link-active">Chapter 1</a></li><li class="dropdown-item"><!----> <a href="/fp_book_club_ts/chapter_2.html" class="nav-link">Chapter 2</a></li><li class="dropdown-item"><!----> <a href="/fp_book_club_ts/chapter_3.html" class="nav-link">Chapter 3</a></li><li class="dropdown-item"><!----> <a href="/fp_book_club_ts/chapter_4.html" class="nav-link">Chapter 4</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/calebharris/fp_book_club_ts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/fp_book_club_ts/chapter_1.html" class="active sidebar-link">Chapter 1. What is functional programming?</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fp_book_club_ts/chapter_1.html#benefits-of-fp-a-simple-example" class="sidebar-link">Benefits of FP: a simple example</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fp_book_club_ts/chapter_1.html#a-program-with-side-effects" class="sidebar-link">A program with side effects</a></li><li class="sidebar-sub-header"><a href="/fp_book_club_ts/chapter_1.html#adding-a-payments-object" class="sidebar-link">Adding a Payments object</a></li><li class="sidebar-sub-header"><a href="/fp_book_club_ts/chapter_1.html#a-functional-solution-removing-the-side-effects" class="sidebar-link">A functional solution: removing the side effects</a></li></ul></li><li class="sidebar-sub-header"><a href="/fp_book_club_ts/chapter_1.html#definition-of-a-pure-function" class="sidebar-link">Definition of a pure function</a></li></ul></li><li><a href="/fp_book_club_ts/chapter_2.html" class="sidebar-link">Chapter 2. Getting started with functional programming in TypeScript</a></li><li><a href="/fp_book_club_ts/chapter_3.html" class="sidebar-link">Chapter 3. Functional data structures</a></li><li><a href="/fp_book_club_ts/chapter_4.html" class="sidebar-link">Chapter 4. Handling errors without exceptions</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="chapter-1-what-is-functional-programming"><a href="#chapter-1-what-is-functional-programming" aria-hidden="true" class="header-anchor">#</a> Chapter 1. What is functional programming?</h1> <p>We construct our programs using only <em>pure functions</em> - functions that have no <em>side effects</em>.</p> <p>A function has a side effect if it does anything other than return a value. Examples:</p> <ul><li>Modifying any state, such as a variable or data structure, in place</li> <li>Throwing an exception or exiting the program with an error</li> <li>Reading or writing a file</li> <li>Making a network request</li></ul> <h2 id="benefits-of-fp-a-simple-example"><a href="#benefits-of-fp-a-simple-example" aria-hidden="true" class="header-anchor">#</a> Benefits of FP: a simple example</h2> <p>We'll walk through refactoring a simple program to remove side effects and demonstrate some TypeScript syntax. We'll
also touch on two import concepts in functional programming: <em>referential transparency</em> and the <em>substitution model</em>.</p> <p>See <a href="https://github.com/calebharris/fp_book_club_ts/tree/master/fpbookclub/intro" target="_blank" rel="noopener noreferrer">the code repository<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for expanded,
runnable versions of these examples.</p> <h3 id="a-program-with-side-effects"><a href="#a-program-with-side-effects" aria-hidden="true" class="header-anchor">#</a> A program with side effects</h3> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// `class` keyword introduces a class</span>
<span class="token keyword">class</span> <span class="token class-name">Cafe</span> <span class="token punctuation">{</span>

  <span class="token comment">// method of a class introduced by a</span>
  <span class="token comment">// name followed by ()</span>
  <span class="token function">buyCoffee</span><span class="token punctuation">(</span>cc<span class="token punctuation">:</span> CreditCard<span class="token punctuation">)</span><span class="token punctuation">:</span> Coffee <span class="token punctuation">{</span>   <span class="token comment">// `cc: CreditCard` defines parameter</span>
                                        <span class="token comment">//  named `cc` of type `CreditCard`</span>
                                        <span class="token comment">//</span>
                                        <span class="token comment">// `: Coffee` declares the return type</span>
                                        <span class="token comment">// of the method. compiler will error</span>
                                        <span class="token comment">// if the method doesn't return a</span>
                                        <span class="token comment">// `Coffee` object</span>

    <span class="token keyword">const</span> cup <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Coffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cc<span class="token punctuation">.</span><span class="token function">charge</span><span class="token punctuation">(</span>cup<span class="token punctuation">.</span>price<span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// side effect: charges the card</span>
    <span class="token keyword">return</span> cup<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>The line <code>cc.charge(cup.price)</code> is an example of a side effect. Charging a credit card involves some interaction
with the outside world. But the function's return value is just a <code>Coffee</code>, meaning this interaction is not easily
observable, making our function difficult to test. We can improve modularity and testability by introducing a
<code>Payments</code> object that encapsulates the payment processing logic and removing it from <code>CreditCard</code>.</p> <h3 id="adding-a-payments-object"><a href="#adding-a-payments-object" aria-hidden="true" class="header-anchor">#</a> Adding a Payments object</h3> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Cafe</span> <span class="token punctuation">{</span>
  <span class="token function">buyCoffee</span><span class="token punctuation">(</span>cc<span class="token punctuation">:</span> CreditCard<span class="token punctuation">,</span> p<span class="token punctuation">:</span> Payments<span class="token punctuation">)</span><span class="token punctuation">:</span> Coffee <span class="token punctuation">{</span>
    <span class="token keyword">const</span> cup <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Coffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    p<span class="token punctuation">.</span><span class="token function">charge</span><span class="token punctuation">(</span>cc<span class="token punctuation">,</span> cup<span class="token punctuation">.</span>price<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> cup<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>The side effect still happens. But we have improved testability because we can pass in a mock <code>Payments</code> object.
However, any mock will be awkward to use, because it will have to do things like maintain internal state that we can
inspect after the call to <code>charge()</code>. This is a bit much if all we want is to test that buyCoffee charges the correct
amount for a cup of coffee. It's also going to be tough to reuse buyCoffee. Say we wanted to buy 10 coffees: there is
no obvious way to do that without contacting the payment processor 10 times!</p> <h3 id="a-functional-solution-removing-the-side-effects"><a href="#a-functional-solution-removing-the-side-effects" aria-hidden="true" class="header-anchor">#</a> A functional solution: removing the side effects</h3> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// buyCoffee now returns a pair, or tuple, of the</span>
<span class="token comment">// purchased Coffee  and its associated Charge</span>
<span class="token function">buyCoffee</span><span class="token punctuation">(</span>cc<span class="token punctuation">:</span> CreditCard<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Coffee<span class="token punctuation">,</span> Charge<span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> cup <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Coffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> charge <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Charge</span><span class="token punctuation">(</span>cc<span class="token punctuation">,</span> cup<span class="token punctuation">.</span>price<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>cup<span class="token punctuation">,</span> charge<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Here, we've removed the side effect. Instead of immediately interacting with the payment processor, <code>buyCoffee</code> returns
a new <code>Charge</code> value object along with the <code>Coffee</code>. We can think of this as a description of what we want to happen,
rather than detailed instructions on how to accomplish it. Actually <em>interpreting</em> the meaning of <code>Charge</code> objects is
now a concern for elsewhere. In fact, <code>Cafe</code> no longer has any knowledge of how the process of charging the card works.
Let's look at <code>Charge</code> more closely:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Charge</span> <span class="token punctuation">{</span>
  readonly cc<span class="token punctuation">:</span> CreditCard<span class="token punctuation">;</span>    <span class="token comment">// once a Charge is created, it should never</span>
  readonly amount<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>    <span class="token comment">// change, hence the `readonly` markers</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span>cc<span class="token punctuation">:</span> CreditCard<span class="token punctuation">,</span> amount<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cc <span class="token operator">=</span> cc<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>amount <span class="token operator">=</span> amount<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * Returns a new Charge containing the sum of the amounts of this Charge
   * and the other Charge
   **/</span>
  <span class="token function">combine</span><span class="token punctuation">(</span>other<span class="token punctuation">:</span> Charge<span class="token punctuation">)</span><span class="token punctuation">:</span> Charge <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cc <span class="token operator">==</span> other<span class="token punctuation">.</span>cc<span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Charge</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cc<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>amount <span class="token operator">+</span> other<span class="token punctuation">.</span>amount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Can't combine charges to different cards&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p><code>Charge</code> is an immutable value object, equipped with a <code>combine()</code> function to merge two charges into one. Now we have
a way to more easily represent the idea of purchasing 10 coffees. We just need to combine the 10 charges into one.</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token function">buyCoffees</span><span class="token punctuation">(</span>cc<span class="token punctuation">:</span> CreditCard<span class="token punctuation">,</span> n<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Coffee<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> Charge<span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> cards<span class="token punctuation">:</span> CreditCard<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>cc<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> purchases <span class="token operator">=</span> <span class="token builtin">Array</span><span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span>cards<span class="token punctuation">,</span> cc <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">buyCoffee</span><span class="token punctuation">(</span>cc<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// this part is a bit ugly, but we're just splitting the array of</span>
  <span class="token comment">// [Coffee, Charge] tuples into one Coffee array and one Charge array</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>coffs<span class="token punctuation">,</span> chgs<span class="token punctuation">]</span> <span class="token operator">=</span> purchases<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token punctuation">[</span>coffees<span class="token punctuation">,</span> charges<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>coffee<span class="token punctuation">,</span> charge<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        coffees<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>coffee<span class="token punctuation">)</span><span class="token punctuation">;</span>
        charges<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>charge<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span>coffees<span class="token punctuation">,</span> charges<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// reduce the list of Charges to one by sequentially applying combine()</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>coffs<span class="token punctuation">,</span> chgs<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> r<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> l<span class="token punctuation">.</span><span class="token function">combine</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>Our functional solution has significant advantages over the previous two iterations. It's easier to test, since all we
need to do is assert that the <code>Charge</code> objects have the expected values in their <code>cc</code> and <code>amount</code> properties. It's
also easier to combine simple, low-level behavior into more advanced functionality. Look how straightforward it was to
implement batch charging! Finally, we can imagine that the library for communicating with the payment processor is made
simpler by this approach. It only needs to issue the correct commands for any given value of <code>Charge</code>.</p> <div class="tip custom-block"><p class="custom-block-title">Note</p> <p>If you've been following along in <em>Functional Programming in Scala</em>, you may have noticed that the Scala code
corresponding to these snippets is more compact and elegant. For instance, TypeScript doesn't have the notion of
<code>case</code> classes, requiring us to write a little more boilerplate to achieve the same end. It also lacks an <code>unzip</code>
for easily separating a sequence of tuples into a tuple of sequences. In general, TypeScript's standard library (which
is really just JavaScript's) is less comprehensive than Scala's.</p> <p>On the other hand, TypeScript has better destructuring support (e.g. <code>const [coffees, charges] = ...</code>) and is a
relatively thin enhancement to JavaScript, giving it great applicability to web programming. Many people find the
experience of developing software with Node.js to be a joy (and, conversely, developing with anything JVM-based to be a
constant time-suck).</p> <p>Later on, we'll have to employ some advanced, potentially difficult-to-understand techniques to get the same expressive
power from TypeScript's types as we can with Scala's. Still, TypeScript is a powerful, easy-to-deploy, and
rapidly-evolving language that drastically improves our ability to manage and maintain large JavaScript projects.</p></div> <h2 id="definition-of-a-pure-function"><a href="#definition-of-a-pure-function" aria-hidden="true" class="header-anchor">#</a> Definition of a pure function</h2> <p>The book differentiates between &quot;functions&quot; and &quot;procedures&quot;, stating that the phrase &quot;pure function&quot; is redundant. But
given the preponderance of using &quot;function&quot; to mean any semi-cohesive, addressable sequence of code, we'll stick with
explicitly calling functions &quot;pure&quot; when it matters. Consider a function <code>f</code>, with an input type of <code>A</code> and an output
type of <code>B</code>. In both Scala and TypeScript, the type of <code>f</code> is written as <code>A =&gt; B</code>. Then <code>f</code> is pure if it relates every
value of <code>A</code> to exactly one value of <code>B</code>, the output value is determined solely by the input value, and <code>f</code> takes no
other actions that change the meaning of the program.</p> <p>Some examples of pure functions:</p> <ul><li>Integer addition</li> <li>Index of substring in string, if the string is immutable</li></ul> <p>The concept of <em>referential transparency</em>, which is a property of <em>expressions</em>, formalizes purity. Any part of a
program that can be evaluated to a result is an expression (meaning that a function is one kind of expression), and it
is referentially transparent (or RT) if its every occurence in a program can be replaced by its result without altering
the meaning of the program. More formally:</p> <div class="tip custom-block"><p class="custom-block-title">Referential transparency and purity</p> <p>An expression <code>e</code> is <em>referentially transparent</em> if, for all programs <code>p</code>, all occurrences of <code>e</code> in <code>p</code> can be
replaced by the result of evaluating <code>e</code> without changing the meaning of <code>p</code>. A function <code>f</code> is <em>pure</em> if the
expression <code>f(x)</code> is referentially transparent for all referentially transparent <code>x</code>.</p></div> <p>Referential transparency allows us to reason about programs using the substitution model, wherein we discover the
meaning of program by repeatedly replacing expressions with their results.</p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">11/5/2018, 6:03:11 PM</span></div></div> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/fp_book_club_ts/chapter_2.html">
          Chapter 2. Getting started with functional programming in TypeScript
        </a>
        â†’
      </span></p></div> </div> <!----></div></div>
    <script src="/fp_book_club_ts/assets/js/4.87d19787.js" defer></script><script src="/fp_book_club_ts/assets/js/app.ea25a7e9.js" defer></script>
  </body>
</html>
